<div class="page-wrapper bg-white">
  <app-breadcrumb></app-breadcrumb>

    <div class="m-4">
      <app-complex-search-input
        [rules]="filteringRules()"
        [defaultRule]="defaultRule"
        [hackings]="hackings()"
        (filterApplied)="filterApply($event)"
      ></app-complex-search-input>
      <mat-chip-list #chipList>
        <mat-chip *ngFor="let filter of filters" [removable]="true"
          (removed)="removeFilter(filter)">
          {{ filter.description }}
          <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>
      </mat-chip-list>
    </div>




    <div class="m-4">
      <table mat-table [dataSource]="dataSource">

        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef> Usu√°rio </th>
          <td mat-cell *matCellDef="let element" style="width: 500px;">
            <div class="float-left p-1 mr-2">
              <img [src]="element.avatar || USER_PLACEHOLDER" class="img-thumbnail rounded-circle" width="50" height="50">
            </div>
            <div class="pt-1 pb-1 username text-truncate">
              <strong class="">{{ element.firstName }} {{ element.lastName || '' }}</strong>
              <br>
              <span>{{ element.email }}</span>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="access">
          <th mat-header-cell *matHeaderCellDef> Acesso </th>
          <td mat-cell *matCellDef="let element">
            <mat-form-field>
              <mat-label>Produtos</mat-label>
              <mat-select multiple [(value)]="access[getAccessKey((element.id))]">
                <mat-option *ngFor="let p of products" [value]="p.id" (onSelectionChange)="setProduct($event, element.id)">{{ p.name }}</mat-option>
              </mat-select>
            </mat-form-field>
          </td>
        </ng-container>

        <ng-container matColumnDef="read">
          <th mat-header-cell *matHeaderCellDef> Visualizar </th>
          <td mat-cell *matCellDef="let element"> teste </td>
        </ng-container>

        <ng-container matColumnDef="write">
          <th mat-header-cell *matHeaderCellDef> Editar </th>
          <td mat-cell *matCellDef="let element"> teste </td>
        </ng-container>

        <ng-container matColumnDef="admin">
          <th mat-header-cell *matHeaderCellDef> Gerenciar </th>
          <td mat-cell *matCellDef="let element"> teste </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"
            (click)="selection.toggle(row)">
        </tr>

      </table>


      <!-- <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 d-none">

        <ng-container matColumnDef="select">
          <th mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)="$event ? masterToggle() : null"
            [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()"
            [aria-label]="checkboxLabel()">
          </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row">
            <mat-checkbox (click)="$event.stopPropagation()"
                          (change)="$event ? selection.toggle(row) : null"
                          [checked]="selection.isSelected(row)"
                          [aria-label]="checkboxLabel(row)">
            </mat-checkbox>
          </td>
        </ng-container>

        <ng-container matColumnDef="position">
          <th mat-header-cell *matHeaderCellDef> No. </th>
          <td mat-cell *matCellDef="let element"> {{element.position}} </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>

        <ng-container matColumnDef="weight">
          <th mat-header-cell *matHeaderCellDef> Weight </th>
          <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
        </ng-container>

        <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef> Symbol </th>
          <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"
            (click)="selection.toggle(row)">
        </tr>
      </table> -->
    </div>

</div>
